<!DOCTYPE html>
<html lang="ja">
<head>
   <meta charset="UTF-8">
   <meta name="viewport" content="width=device-width, initial-scale=1.0">
   <title>webã‚µã‚¤ã‚³ãƒ­ã€€10å€‹ã¾ã§</title>
   <!-- Tailwind CSSã®èª­ã¿è¾¼ã¿ -->
   <script src="https://cdn.tailwindcss.com"></script>
   <style>
       /* ãƒ•ã‚©ãƒ³ãƒˆè¨­å®š */
       :root {
           font-family: 'Inter', sans-serif;
       }


       /* 3Dã‚µã‚¤ã‚³ãƒ­ã®åŸºæœ¬ã‚¹ã‚¿ã‚¤ãƒ« */
       .dice-container {
           perspective: 600px;
           width: 80px;
           height: 80px;
           margin: 20px; /* é‡ãªã‚Šå¯¾ç­– */
           display: inline-block;
           position: relative;
           z-index: 10;
       }


       .dice {
           width: 100%;
           height: 100%;
           position: relative;
           transform-style: preserve-3d;
           transition: transform 0.5s ease-out;
           cursor: pointer;
           box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
           border-radius: 10px;
       }


       .face {
           position: absolute;
           width: 80px;
           height: 80px;
           background: #fff;
           border: 1px solid #333;
           display: flex;
           justify-content: center;
           align-items: center;
           font-size: 32px;
           font-weight: bold;
           color: #333;
           border-radius: 8px;
           box-shadow: inset 0 0 10px rgba(0, 0, 0, 0.1);
       }


       /* ã‚µã‚¤ã‚³ãƒ­ã®å„é¢ã®ä½ç½® (çœç•¥) */
       .face-1 { transform: rotateY(0deg) translateZ(40px); }
       .face-2 { transform: rotateX(90deg) translateZ(40px); }
       .face-3 { transform: rotateY(90deg) translateZ(40px); }
       .face-4 { transform: rotateY(-90deg) translateZ(40px); }
       .face-5 { transform: rotateX(-90deg) translateZ(40px); }
       .face-6 { transform: rotateY(180deg) translateZ(40px); }


       /* ãƒ‰ãƒƒãƒˆ (ç›®) ã®ã‚¹ã‚¿ã‚¤ãƒ« (çœç•¥) */
       .dot {
           position: absolute;
           width: 12px;
           height: 12px;
           background: #333;
           border-radius: 50%;
       }


       /* 1ã®ç›® */
       .face-1 .dot:nth-child(1) { top: 50%; left: 50%; transform: translate(-50%, -50%); }


       /* 2ã®ç›® */
       .face-2 .dot:nth-child(1) { top: 20%; left: 20%; }
       .face-2 .dot:nth-child(2) { bottom: 20%; right: 20%; }


       /* 3ã®ç›® */
       .face-3 .dot:nth-child(1) { top: 20%; left: 20%; }
       .face-3 .dot:nth-child(2) { top: 50%; left: 50%; transform: translate(-50%, -50%); }
       .face-3 .dot:nth-child(3) { bottom: 20%; right: 20%; }


       /* 4ã®ç›® */
       .face-4 .dot:nth-child(1) { top: 20%; left: 20%; }
       .face-4 .dot:nth-child(2) { top: 20%; right: 20%; }
       .face-4 .dot:nth-child(3) { bottom: 20%; left: 20%; }
       .face-4 .dot:nth-child(4) { bottom: 20%; right: 20%; }


       /* 5ã®ç›® */
       .face-5 .dot:nth-child(1) { top: 20%; left: 20%; }
       .face-5 .dot:nth-child(2) { top: 20%; right: 20%; }
       .face-5 .dot:nth-child(3) { top: 50%; left: 50%; transform: translate(-50%, -50%); }
       .face-5 .dot:nth-child(4) { bottom: 20%; left: 20%; }
       .face-5 .dot:nth-child(5) { bottom: 20%; right: 20%; }


       /* 6ã®ç›® */
       .face-6 .dot:nth-child(1) { top: 20%; left: 20%; }
       .face-6 .dot:nth-child(2) { top: 20%; right: 20%; }
       .face-6 .dot:nth-child(3) { top: 50%; left: 20%; transform: translateY(-50%); }
       .face-6 .dot:nth-child(4) { top: 50%; right: 20%; transform: translateY(-50%); }
       .face-6 .dot:nth-child(5) { bottom: 20%; left: 20%; }
       .face-6 .dot:nth-child(6) { bottom: 20%; right: 20%; }


       /* ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ */
       @keyframes rotating {
           from { transform: rotateX(0deg) rotateY(0deg) rotateZ(0deg); }
           to { transform: rotateX(720deg) rotateY(1080deg) rotateZ(360deg); }
       }
       .dice-rolling {
           animation: rotating 0.8s infinite linear;
           box-shadow: 0 0 30px rgba(255, 255, 0, 0.7), 0 10px 20px rgba(0, 0, 0, 0.5);
       }
      
       /* ä¸€æ‹¬æ“ä½œãƒœã‚¿ãƒ³ã®ã‚¹ã‚¿ã‚¤ãƒ« */
       .action-button {
           padding: 0.75rem 2rem;
           font-size: 1.125rem;
           font-weight: bold;
           border-radius: 9999px;
           transition: all 0.2s;
           cursor: pointer;
           box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -2px rgba(0, 0, 0, 0.1);
       }
      
       .action-button:hover {
           transform: translateY(-2px);
           box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -4px rgba(0, 0, 0, 0.1);
       }


       .action-button:active {
           transform: translateY(1px);
       }
      
       /* ã‚µã‚¤ã‚³ãƒ­æ•°é¸æŠãƒœã‚¿ãƒ³ã®ã‚¹ã‚¿ã‚¤ãƒ« */
       .dice-count-button {
           padding: 0.5rem 1rem;
           border-radius: 0.5rem;
           font-weight: 600;
           background-color: #e0f2fe; /* blue-100 */
           color: #1e40af; /* blue-800 */
           transition: all 0.15s;
           border: 2px solid transparent;
           min-width: 50px; /* ãƒœã‚¿ãƒ³å¹…ã‚’ç¢ºä¿ */
           text-align: center;
       }


       .dice-count-button:hover {
           background-color: #bfdbfe; /* blue-200 */
       }


       .dice-count-button.active {
           background-color: #3b82f6; /* blue-500 */
           color: white;
           border-color: #1e40af; /* blue-800 */
           transform: scale(1.05);
           box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
       }
   </style>
</head>
<body class="bg-gray-100 min-h-screen flex flex-col items-center p-4">


   <!-- ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒŠ -->
   <div class="w-full max-w-4xl bg-white p-6 rounded-xl shadow-2xl">
       <h1 class="text-3xl font-extrabold text-blue-600 mb-6 text-center border-b-4 border-blue-100 pb-2">
           ğŸ² webã‚µã‚¤ã‚³ãƒ­ ğŸ²
       </h1>


       <!-- ã‚µã‚¤ã‚³ãƒ­ã®æ•°é¸æŠ (ãƒœã‚¿ãƒ³ã«ç½®ãæ›ãˆ) -->
       <div class="mb-8 p-4 bg-blue-50 rounded-lg">
           <p class="block text-lg font-semibold text-blue-800 mb-4 text-center">
               ã‚µã‚¤ã‚³ãƒ­ã®æ•°ã‚’é¸æŠ: <span id="countDisplay" class="text-xl font-bold text-blue-600">1</span>
           </p>
           <div id="diceCountButtons" class="flex flex-wrap gap-3 justify-center">
               <!-- JavaScriptã§ãƒœã‚¿ãƒ³ãŒã“ã“ã«è¿½åŠ ã•ã‚Œã¾ã™ -->
           </div>
       </div>
      
       <!-- ä¸€æ‹¬æ“ä½œãƒœã‚¿ãƒ³ã‚¨ãƒªã‚¢ -->
       <div class="mb-8 flex justify-center space-x-6">
           <button id="rollAllButton" class="action-button bg-pink-500 text-white hover:bg-pink-600">
               <span class="text-2xl mr-2">ğŸ”„</span> ã™ã¹ã¦æŒ¯ã‚‹
           </button>
           <button id="stopAllButton" class="action-button bg-indigo-500 text-white hover:bg-indigo-600">
               <span class="text-2xl mr-2">âœ‹</span> ã™ã¹ã¦æ­¢ã‚ã‚‹
           </button>
       </div>


       <!-- ã‚µã‚¤ã‚³ãƒ­è¡¨ç¤ºã‚¨ãƒªã‚¢ -->
       <div id="diceArea" class="flex flex-wrap justify-center gap-4 p-4 min-h-[150px] bg-gray-50 rounded-lg shadow-inner">
           <!-- JavaScriptã§ã‚µã‚¤ã‚³ãƒ­ãŒã“ã“ã«è¿½åŠ ã•ã‚Œã¾ã™ -->
       </div>


       <!-- åˆè¨ˆçµæœè¡¨ç¤º -->
       <div class="mt-8 text-center p-4 bg-green-100 rounded-lg shadow-md">
           <p class="text-xl font-semibold text-green-800">
               åˆè¨ˆ: <span id="totalResult" class="text-3xl font-extrabold text-green-600">0</span>
           </p>
       </div>
   </div>


   <script>
       const diceArea = document.getElementById('diceArea');
       const countDisplay = document.getElementById('countDisplay');
       const totalResultElement = document.getElementById('totalResult');
       const rollAllButton = document.getElementById('rollAllButton');
       const stopAllButton = document.getElementById('stopAllButton');
       const diceCountButtonsContainer = document.getElementById('diceCountButtons');
       let diceStates = []; // { isRolling: false, value: 0, intervalId: null } ã®é…åˆ—


       // ----------------------------------------------------
       // ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£é–¢æ•°
       // ----------------------------------------------------


       // 1ã‹ã‚‰6ã¾ã§ã®ãƒ©ãƒ³ãƒ€ãƒ ãªæ•´æ•°ã‚’ç”Ÿæˆ
       function getRandomValue() {
           return Math.floor(Math.random() * 6) + 1;
       }


       // è§’åº¦ã‚’è¨­å®šã—ã¦ã‚µã‚¤ã‚³ãƒ­ã‚’ç‰¹å®šã®å€¤ã®é¢ã§åœæ­¢ã•ã›ã‚‹
       function setDiceRotation(diceElement, value) {
           // å›è»¢ã‚’è¡¨ç¾ã™ã‚‹ãŸã‚ã€åœæ­¢æ™‚ã®ãƒ©ãƒ³ãƒ€ãƒ ãªå¾®èª¿æ•´ã‚’åŠ ãˆã‚‹
           const randX = Math.floor(Math.random() * 10) - 5;
           const randY = Math.floor(Math.random() * 10) - 5;
           const randZ = Math.floor(Math.random() * 10) - 5;
          
           let baseRotation = '';
           switch (value) {
               case 1: baseRotation = 'rotateX(0deg) rotateY(0deg)'; break;
               case 2: baseRotation = 'rotateX(-90deg) rotateY(0deg)'; break;
               case 3: baseRotation = 'rotateY(90deg) rotateX(0deg)'; break;
               case 4: baseRotation = 'rotateY(-90deg) rotateX(0deg)'; break;
               case 5: baseRotation = 'rotateX(90deg) rotateY(0deg)'; break;
               case 6: baseRotation = 'rotateX(0deg) rotateY(180deg)'; break;
               default: baseRotation = 'rotateX(0deg) rotateY(0deg)';
           }
           // æœ€çµ‚çš„ãªåœæ­¢ä½ç½®
           diceElement.style.transform = baseRotation + ` translateZ(40px) rotateX(${randX}deg) rotateY(${randY}deg) rotateZ(${randZ}deg)`;
       }


       // åˆè¨ˆå€¤ã‚’æ›´æ–°
       function updateTotal() {
           const total = diceStates.reduce((sum, state) => sum + state.value, 0);
           totalResultElement.textContent = total;
       }


       // ã‚µã‚¤ã‚³ãƒ­ã®ç›®ã‚’æç”»ã™ã‚‹DOMè¦ç´ ã‚’ç”Ÿæˆ
       function createDotFace(faceValue) {
           const face = document.createElement('div');
           face.className = `face face-${faceValue}`;


           // 1ã‹ã‚‰6ã®ç›®ã«å¿œã˜ã¦ãƒ‰ãƒƒãƒˆã‚’è¿½åŠ 
           for (let i = 0; i < faceValue; i++) {
               const dot = document.createElement('div');
               dot.className = 'dot';
               face.appendChild(dot);
           }
           return face;
       }


       // ----------------------------------------------------
       // ãƒ¡ã‚¤ãƒ³ãƒ­ã‚¸ãƒƒã‚¯
       // ----------------------------------------------------


       // ã‚µã‚¤ã‚³ãƒ­ã®DOMè¦ç´ ã‚’ä½œæˆ
       function createDiceElement(index) {
           const container = document.createElement('div');
           container.className = 'dice-container';
           container.dataset.index = index;


           const dice = document.createElement('div');
           dice.className = 'dice';
           dice.id = `dice-${index}`;
           // å€‹åˆ¥ã‚¿ãƒƒãƒ—æ©Ÿèƒ½ã¯æ®‹ã™
           dice.addEventListener('click', () => toggleRoll(index));


           // 6é¢åˆ†ã®DOMã‚’ä½œæˆ
           dice.appendChild(createDotFace(1));
           dice.appendChild(createDotFace(2));
           dice.appendChild(createDotFace(3));
           dice.appendChild(createDotFace(4));
           dice.appendChild(createDotFace(5));
           dice.appendChild(createDotFace(6));


           container.appendChild(dice);
           return container;
       }


       // ã‚µã‚¤ã‚³ãƒ­ã®æ•°ã‚’æ›´æ–°
       function updateDiceCount(count) {
           const newCount = parseInt(count);
          
           // è¡¨ç¤ºã¨ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ãƒœã‚¿ãƒ³ã®æ›´æ–°
           countDisplay.textContent = newCount;
           document.querySelectorAll('.dice-count-button').forEach(btn => {
               if (parseInt(btn.dataset.count) === newCount) {
                   btn.classList.add('active');
               } else {
                   btn.classList.remove('active');
               }
           });


           // æ—¢å­˜ã®ã‚µã‚¤ã‚³ãƒ­ã‚’ã‚¯ãƒªã‚¢
           diceArea.innerHTML = '';
           diceStates = [];


           // æ–°ã—ã„æ•°ã®ã‚µã‚¤ã‚³ãƒ­ã‚’ä½œæˆã—ã€åˆæœŸå€¤ã‚’è¨­å®š
           for (let i = 0; i < newCount; i++) {
               const initialValue = getRandomValue();
               diceStates.push({
                   isRolling: false,
                   value: initialValue,
                   intervalId: null
               });


               const diceElement = createDiceElement(i);
               diceArea.appendChild(diceElement);
              
               // åˆæœŸè¡¨ç¤ºï¼ˆåˆæœŸå€¤ã®é¢ã‚’ä¸Šã«ã™ã‚‹ï¼‰
               const diceInner = document.getElementById(`dice-${i}`);
               const baseRotation = (v) => {
                   switch (v) {
                       case 1: return 'rotateX(0deg) rotateY(0deg)';
                       case 2: return 'rotateX(-90deg) rotateY(0deg)';
                       case 3: return 'rotateY(90deg) rotateX(0deg)';
                       case 4: return 'rotateY(-90deg) rotateX(0deg)';
                       case 5: return 'rotateX(90deg) rotateY(0deg)';
                       case 6: return 'rotateX(0deg) rotateY(180deg)';
                       default: return 'rotateX(0deg) rotateY(0deg)';
                   }
               };
               diceInner.style.transform = baseRotation(initialValue) + ` translateZ(40px)`;
           }


           // åˆæœŸåˆè¨ˆå€¤ã‚’æ›´æ–°
           updateTotal();
       }


       // ã‚µã‚¤ã‚³ãƒ­ã®å›è»¢é–‹å§‹/åœæ­¢ã‚’åˆ‡ã‚Šæ›¿ãˆ
       function toggleRoll(index) {
           const state = diceStates[index];
           const diceElement = document.getElementById(`dice-${index}`);


           if (state.isRolling) {
               // åœæ­¢å‡¦ç†
               clearInterval(state.intervalId);
               state.isRolling = false;
               diceElement.classList.remove('dice-rolling');


               // æœ€çµ‚çš„ãªå€¤ã‚’ãƒ©ãƒ³ãƒ€ãƒ ã«æ±ºå®šã—ã€ãã®é¢ã§æ­¢ã‚ã‚‹
               const finalValue = getRandomValue();
               state.value = finalValue;
               setDiceRotation(diceElement, finalValue); // ãƒ©ãƒ³ãƒ€ãƒ ãªå¾®èª¿æ•´ä»˜ãã§åœæ­¢


               // åˆè¨ˆã‚’æ›´æ–°
               updateTotal();


           } else {
               // å›è»¢é–‹å§‹å‡¦ç†
               state.isRolling = true;
               diceElement.classList.add('dice-rolling');
              
               // å›è»¢ä¸­ã¯å€¤ã‚’0ã«ãƒªã‚»ãƒƒãƒˆï¼ˆè¨ˆç®—å¯¾è±¡å¤–ã¨ã™ã‚‹ãŸã‚ï¼‰
               state.value = 0;
               updateTotal();


               // CSSã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ãŒå›è»¢ã‚’æ‹…å½“
               state.intervalId = setInterval(() => {
                   // ã“ã“ã¯å›è»¢ä¸­ã‚’ç¤ºã™ãŸã‚ã®ã‚‚ã®ã§ã€ç‰¹åˆ¥ãªãƒ­ã‚¸ãƒƒã‚¯ã¯ä¸è¦
               }, 800);
           }
       }
      
       // ã™ã¹ã¦ã®ã‚µã‚¤ã‚³ãƒ­ã‚’æŒ¯ã‚‹ (é–‹å§‹)
       function rollAllDice() {
           diceStates.forEach((state, index) => {
               if (!state.isRolling) {
                   toggleRoll(index);
               }
           });
       }


       // ã™ã¹ã¦ã®ã‚µã‚¤ã‚³ãƒ­ã‚’æ­¢ã‚ã‚‹ (åœæ­¢)
       function stopAllDice() {
           diceStates.forEach((state, index) => {
               if (state.isRolling) {
                   // toggleRollé–¢æ•°ã¯é–‹å§‹/åœæ­¢ã‚’åˆ‡ã‚Šæ›¿ãˆã‚‹ãŸã‚ã€
                   // å›è»¢ä¸­ã®å ´åˆã¯åœæ­¢å‡¦ç†ãŒå®Ÿè¡Œã•ã‚Œã‚‹
                   toggleRoll(index);
               }
           });
       }
      
       // ã‚µã‚¤ã‚³ãƒ­æ•°é¸æŠãƒœã‚¿ãƒ³ã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—
       function setupCountButtons() {
           for (let i = 1; i <= 10; i++) {
               const button = document.createElement('button');
               button.className = 'dice-count-button';
               button.textContent = `${i}ã“`;
               button.dataset.count = i;
               button.addEventListener('click', (e) => {
                   updateDiceCount(e.target.dataset.count);
               });
               diceCountButtonsContainer.appendChild(button);
           }
       }




       // åˆæœŸè¨­å®š: ãƒšãƒ¼ã‚¸ãƒ­ãƒ¼ãƒ‰æ™‚ã«ã‚µã‚¤ã‚³ãƒ­ã‚’1å€‹è¡¨ç¤º
       window.onload = () => {
           // ãƒœã‚¿ãƒ³ã«ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼ã‚’è¨­å®š
           rollAllButton.addEventListener('click', rollAllDice);
           stopAllButton.addEventListener('click', stopAllDice);


           // ã‚µã‚¤ã‚³ãƒ­æ•°é¸æŠãƒœã‚¿ãƒ³ã‚’ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—
           setupCountButtons();
          
           // åˆæœŸè¡¨ç¤ºã¯1å€‹
           updateDiceCount(1);
       };


   </script>
</body>
</html>

